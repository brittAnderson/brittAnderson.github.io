<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Idle Idea Idylls - Using Nix, Hakyll, and GithubPages</title>
        <link rel="stylesheet" href="../css/latex.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Idle Idea Idylls</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Using Nix, Hakyll, and GithubPages</h1>
            <article>
    <section class="header">
        Posted on May 25, 2020
        
            by Britt Anderson
        
    </section>
    <section>
        <p>The first exercise is to get to stitch together a blog with the use of these tools. First, download and install NixOS. That is a big step and a lot of work on its own. I am not detailing that here. And that is good for you, because I don't really know what I am doing. Compilation /= competency.</p>
<p>Next, you need some Haskell tooling. A secondary reason for using NixOS was the fact that haskell seems to play nice with nix, and my intermittent forays into haskell over the years have already made me aware that is not a trivial point. However, just like nix as a whole, the documentation is patchy, and it is easy to find popular, but out of date resources. A good source as of May 2020 is <a href="https://maybevoid.com/posts/2019-01-27-getting-started-haskell-nix.html">Maybe Void</a>.</p>
<p>The consensus seems to be that a couple of things you will want globally are <code>cabal2nix</code>, <code>nix-prefetch-git</code>, and <code>cabal-install</code>. The rest you can use via the <code>nix store</code>.</p>
<p>You can then use a <code>shell.nix</code> file to pull in the packages your need from haskell to have an environment that lets you use <code>cabal</code> to build your <code>site.hs</code> file. Then instead of stack you can use the compiled <code>site</code> from deep inside your <code>dist-newstyle</code> subdirectory to run the various hakyll commands.</p>
<p>In addition, I adapted the instructions on deploying from the <a href="https://jaspervdj.be/hakyll/tutorials/github-pages-tutorial.html">tutorial</a> to read from a file the deploy command. I just wrote it in the top directory and cobbled together some poorly understood code at the start of the <code>main</code> function in <code>site.hs</code> to build a configuration and supply it to <code>hakyllWith</code>. I think my files and commands should be readable from the develop branch.</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
